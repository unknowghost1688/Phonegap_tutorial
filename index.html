<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Phone gap Testing</title>
    <!-- jQuery and jQuery Mobile -->
    <script src="lib/jquery-2.0.2.min.js"></script>
    <script src="lib/jquery.mobile-1.4.2.min.js"></script>

    <!--JQuery Mobile Css-->
    <link rel="stylesheet" href="css/jquery.mobile-1.4.2.min.css">
    <script type="text/javascript" charset="utf-8">
        //// Wait for Cordova to load  
        //document.addEventListener("deviceready", onDeviceReady, false);
        //// Cordova is ready  
        //function onDeviceReady() {
        //    alert("Going to start download");
        //    downloadFile();
        //}
        //function downloadFile() {
        //    window.requestFileSystem(
        //                 LocalFileSystem.PERSISTENT, 0,
        //                 function onFileSystemSuccess(fileSystem) {
        //                     fileSystem.root.getFile(
        //                                 "dummy.html", { create: true, exclusive: false },
        //                                 function gotFileEntry(fileEntry) {
        //                                     var sPath = fileEntry.fullPath.replace("dummy.html", "");
        //                                     var fileTransfer = new FileTransfer();
        //                                     fileEntry.remove();
        //                                     fileTransfer.download(
        //                                                "http://s3.amazonaws.com/android.phonegap/slicehost-production/apps/1035781/TimeSheet-debug.apk",
        //                                                sPath + "TimeSheet-debug.apk",
        //                                                function (theFile) {
        //                                                    console.log("download complete: " + theFile.toURI());
        //                                                    showLink(theFile.toURI());
        //                                                },
        //                                                function (error) {
        //                                                    console.log("download error source " + error.source);
        //                                                    console.log("download error target " + error.target);
        //                                                    console.log("upload error code: " + error.code);
        //                                                }
        //                                                );
        //                                 },
        //                                 fail);
        //                 },
        //                 fail);
        //}
        //function showLink(url) {
        //    alert(url);
        //    var divEl = document.getElementById("deviceready");
        //    var aElem = document.createElement("a");
        //    aElem.setAttribute("target", "_blank");
        //    aElem.setAttribute("href", url);
        //    aElem.appendChild(document.createTextNode("Ready! Click To Open."))
        //    divEl.appendChild(aElem);
        //}
        //function fail(evt) {
        //    console.log(evt.target.error.code);
        //}

        function storeIntelligrapeLogo() {
            var url = "http://s3.amazonaws.com/android.phonegap/slicehost-production/apps/1035781/TimeSheet-debug.apk"; // image url
            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function (fs) {
                var imagePath = fs.root.fullPath + "/TimeSheet-debug.apk"; // full file path
                var fileTransfer = new FileTransfer();
                fileTransfer.download(url, imagePath, function (entry) {
                    console.log(entry.fullPath); // entry is fileEntry object
                }, function (error) {
                    console.log("Some error");
                });
            })
        }
 </script>  
</head>
<body>
    <!-- Start of first page -->
    <div data-role="page" id="foo">

        <div data-role="header">
            <h1>Foo</h1>
        </div><!-- /header -->

        <div role="main" class="ui-content">
           
            <input type="button" id="Button1" onclick="storeIntelligrapeLogo();" value="storeIntelligrapeLogo" />
            <input type="button" id="Button3" onclick="storeIntelligrapeLogo();" value="download me now" />
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page -->

    <!-- Start of second page -->
    <div data-role="page" id="bar">

        <div data-role="header">
            <h1>Bar</h1>
        </div><!-- /header -->

        <div role="main" class="ui-content">
            <input type="button" id="bb" onclick="storeIntelligrapeLogo();" value="download me" />
            <input type="button" id="Button2" onclick="storeIntelligrapeLogo();" value="download me now" />
            <a class="btn icon action download primary" href="/apps/1035781/download/android/?qr_key=csGz3TwWZfiYLsg68EVx" onclick="s_objectID=&quot;https://build.phonegap.com/apps/1035781/download/android/?qr_key=csGz3TwWZfiYLsg68EVx_1&quot;;return this.s_oc?this.s_oc(e):true"> <span class="filetype">apk</span></a>
            <p>I'm the second in the source order so I'm hidden when the page loads. I'm just shown if a link that references my id is beeing clicked.</p>
            <p><a href="#foo">Back to foo</a></p>
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page -->



</body>
</html>
